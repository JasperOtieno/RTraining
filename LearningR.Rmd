---
title: "Introduction to R Programming"
author: "Jasper Otieno"
date: ' Sys.date()'
output:
  html_document:
    toc: yes
    number_sections: yes
    theme: readable
    fig_caption: yes
  pdf_document:
    toc: yes
editor_options:
  chunk_output_type: console
---
_______________________________________________________________________________
                                                 
This is an introduction to R programming with end goal of learning the basics of R and finally being able to program in R.

# DATA TYPES
R stores data in different types or classes. There are about 4 classes/types of data that R can store. To check the kind of class of data you are working with, use the function `class()` and use the function `typeof()` to check the type of data.

## Character
Refers to data in form of letters, sentences or numbers formatted to texts/strings e.g, names of people (james, rose), letter A, B, or colours, green, blue. They must always be wrapped in double quotation marks when referenced.

```{r}
(char1 <- c("ann", "erick", "", "l"))
class(char1)
typeof(char1)
```

## Numeric
Are class of data that are stored in number formats. These include whole numbers, decimals or even dates. There are various types of numeric data which include integers, double or just numeric.

```{r}
(numeric1 <- c(1, 2, 3, 4, 5, 6.5)) #double

class(numeric1)
typeof(numeric1)

```

## Integers
Are numeric data in form of whole numbers. They are denoted by letter L next to them.
```{r}
(numeric2 <- c(1L, 2L, 3L, 4L, 5L)) #integer (whole numbers)

class(numeric2)
typeof(numeric2)
```

## Factor
Refers to class of data that stores data in categorical format. They values take whole numbers hence are integer type.

```{r factors, include=FALSE}
(fact1 <- factor(c("ECDE", "Primary", "Secondary", "University"))) 

class(fact1)
typeof(fact1)

#Assigning values to factors
#fact2 <- as.factor(fact1, 
#                   levels = c("Primary", "Secondary", "University"),
#                   labels = c("Primary", "Secondary", "University"), 
#                   values = c(1, 2, 3)) #has an error. to investigate cause of #error. Investigate during data cleaning

#Converting factor to character
(fact3 <- factor(fact1))
```

## Logical
These are data types that take the values TRUE or FALSE. They are special kind of numeric data that indicates if a condition is true or not.

```{r}
(lg1 <- c(TRUE, FALSE, FALSE, TRUE))

class(lg1)
typeof(lg1)
```

## Dates and Times
Data can be stored in form of dates or times. They are special kind of numeric data of type double.

```{r}
#System Datetime
(date1 <- Sys.time())

class(date1)
typeof(date1)

#System date
(date2 <- Sys.Date())

class(date2)
typeof(date2)
```

## Data Type Conversion
Data can be converted from one type to another depending on need of analysis or for storage.

```{r}
(numeric1 <- c(1, 2, 3, 4, 5, 6.5))
(numeric2 <- c(1L, 2L, 3L, 4L, 5L))

(data6 <- as.character(numeric1)) #converting numeric to character

class(data6)
typeof(data6)

(data7 <- as.numeric(data6)) #converting character to numeric

class(data7)
typeof(data7)

(data8 <- as.numeric(numeric2)) #converting integer to numeric

class(data8)
typeof(data8)
```

# DATA STRUCTURES
These are ways of organising data for ease of analysis or storage. There are 4 ways that data can be organised in R. To know the structure of your data, use the function `str()`.

## Vectors
Are the smallest or easiest way of organising data. They are as simple as just one character or letter. Vectors are single dimensional and homogeneous (only stores one type of data).

```{r}
#numeric vectors
(vect1 <- c(1, 3, 5, 68, 0)) #specified numbers, integers
(vect2 <- 1:10) #vector of sequential numbers 1 to 10. Default constant is 1
(vect4 <- 0:30) #vector of numbers increasing from 0 to 30. Reverse is true i.e., 30:0
(vect6 <- 2.5:7.5)

class(vect1)
typeof(vect1)
str(vect1)

#character vectors
(vect7 <- c("Jasper", "Dave", "Green", "A", ""))
str(vect7)

#Logical vectors
(vect8 <- c(TRUE, TRUE, FALSE, TRUE))
str(vect8)

#Factor vector
(gender <- c("F", "M", "F", "M", "M"))

#convert gender to a factor
(gender1 <- factor(gender))

(fcoulor <- factor(c("blue", "green", "red", "pink", "green")))

```

### Forming sequence of numbers
```{r}
(vect9 <- seq(from = 1, 
             to = 25, 
             by = 2)) #creates sequence of numbers between 1 and 25 increasing by 2

(vect10 <- seq(from = 1, 
             to = 25, 
             length.out = 50)) # creates a vector of length 50 (50 elements) from 1 to 25

(vect11 <- 0:30)
(length(vect11)) # function length before a vector object outputs vector length 
```

### Calculations using vectors

```{r}
vect4 * 2 #each element in the vector is multiplied by 2

vect4 - 10 #10 is subtracted from each of the elements

vect4 / 5 #each element of vect5 is divided by 4

vect4^5 #each element is raised to the power of 4

sqrt(vect4) #outputs square root of each element of vector4

sqrt(vect4[31]) #outputs sqrt of element at position 31 of vect4
```

### Retrieving vector elements
Square brackets [] are used to index the position of elements in any data structure, vectors included. Lowest index of an element is 1 and not 0.

```{r}
(vect4 <- 0:61)
length(vect4)
vect4[25] #retrieves element at position 25 in vector4
vect4[26] #retrieves element at position 26 in vector 4
vect4[62] #retrieves element at position 26 in vector 4
```

### Converting vectors from one type to another
```{r}
(data5 <- c(1, 2, 3, "Secondary", "University"))
class(data5) #character vector

(x <-as.numeric(data5)) #converting to numeric
class(x)

(data6 <- c(1, 2, 3))
class(data6) #numeric vector

(y <- as.character(data6)) #converting to character
class(y)
```

## Matrices
These are similar to vectors however they are bi dimensional. The data is organised into rows and columns. Columns are clearly defined. Is combination of multiple vectors. Use the function `matrix()` to assign an object a matrix.
Numeric matrices can be used to quickly carry out summaries. By default, matrix arranges the elements by the columns, that is the elements increasing from column to column. This can be changed using the `byrow=TRUE` argument. Matrices are homogeneous.

### Creating a matrix

```{r creatmtx}
(mtx1 <- matrix(c(1:9), nrow=3, ncol=3))

#change order of elements
(mtx2 <- matrix(c(1:9), nrow=3, ncol=3, byrow = TRUE))
```

### Retreiving elements of a matrix
```{r matrixs}
mtx1
mtx1[2,2] #pulls the element at row2 in column2
mtx1[,3] #pulls all elements in column 3
mtx1[3,] #pulls all elements in row3
mtx1[7] #pulls the element at index 7
mtx2[c(1,3),] #pulls everything in rows 1 and 3
mtx2[c(1,3)] #returns values at index 1 and 7

mtx2[,c(2,3)] #returns column 2 and 3
mtx2[,1:3] #returns column 2 to 3
```

### Calculations using matrices
```{r calcmtx}
#summary
summary(mtx1)
summary(mtx2)

#Further calculations
(mtx3 <- matrix(c(seq(from= -98, to= 100, by=2)), nrow=10, ncol=10))
apply(mtx3,2,mean) #calculating mean of each column, 2 means columns

apply(mtx3,1,mean) #calculating mean of each row, 1 means rows
apply(mtx3,1,sum) #calculating sum of each row, 1 means rows

apply (mtx3,1,function(x)mean(x[x>0])) #mean of rows of only positive numbers

```

## Lists
Is one dimensional structures that can hold different types. It's heterogeneous
Use the function `list()` to create a list. It's like a bucket of different items put together.

### Creating lists
```{r}
(list0 <- c("look", 1, TRUE, FALSE)) #holds anything parsed to it

(list1 <- list(
  var1 = 1:20,
  var2 = rep(c("A", "B"), 10)
))

```

### Retreiving elements of a list
```{r}
list1$var2[6]

list1[1]

list1[[1]][6]
list1$var1[6]

(list2 <- list(
  list1 = list(var1 = 1:20,
               var2 = rep(c("A", "B"), 10)),
  var3 = rep(c("A", "B"), 10)
))


class(list2)
typeof(list2)
str(list2)  

list2$list1$var1[1]
list2[[1]][1]

list2$list1$var2[1]
list2[[2]][1]


(list_all <- list(
  df1 = list(var1 = 1:20,
             var2 = rep(c("A", "B"), 10)),
  df2 = list(var3 = 1:20,
             var4 = rep(c("A", "B"), 10))
))

```

### convert list to dataframe

```{r}
#(list_all1 <- do.call(list_all)) #investigate
```

## Data Frames
These are multidimensional collection of different data types. They are created using the  function `data.frame()` to assign object as a data frame. They are considered a collection of different types of vectors. Each of the columns is a vector and stores only one type of data. Has unlimited number of rows and columns. Most of the data collected and used are organised in data frames. To reference a column, use `$` symbol and `[]` for indexing the elements.

### Creating a data frame

```{r}
(df1 <- data.frame(col1 = c(1, 2, 3, 4, 5,7),
                  col2 = c("ann", "john", "erick", "james", "june", "Jasper")))

class(df1)
typeof(df1)
str(df1)
```

### Create data frames from different vectors
```{r}
(fname <- c("Ken", "Cate", "Amalia", "Jimmy", "dorcas")) #character vector
(score <- c(34, 67, 90, 200, 20)) #numeric vector
(fcolour = factor(c("blue", "green", "red", "pink", "green"))) #factor vector
(gender2 = factor(c("M", "F", "F", "M", "F"))) #factor vector
(truefalse = c(TRUE, TRUE, FALSE, TRUE, FALSE))#logical vector

#Combine above to form data frame
(df = data.frame(fname, score, fcolour, gender, truefalse))

str(df)
```

### Retreiving elements of a data frame

```{r}
df1[2, 2] #outputs element at row2, column2 from data frame 1=john
df1[6, 2]  #outputs element at row6, column 2 =jasper

df1$col2 #outputs all elements of column2 , $reference the column 

df1$col2[5] #outputs the element at position 5 of column 2=june

df1[3, ] #display all elements in row3 -row number
df1

df1[df1$col3 < 12, ] #display rows with col3 less than 12
df1[df1$col5 == 1, ] #display rows with col5 equals 1
df1[df1$col2 == "john", ] #display rows with col2 containing john
df1[df1$col6 > 1, ] #display rows with col6 greater than 1
```

### Calculations using elements of a data frame

```{r}
(df1$col3 <- df1$col1*4) #multiplies each element in column 1 by 4 and assigns them to column 3 of the same data frame

(df1$col4 <- df1$col1/3) #divides each element of col1 by 3 and outputs in col4

df1[, "col4"] #display all elements in col4-col name
df1[, 4] #display all elements in col4-col number

(df1$col5 <- round(df1$col4, 3)) #rounds off col4 to 4 d.p

(df1$col6 <- signif(df1$col4, 3))

```

### Combining data frames

```{r}
(df2 <- data.frame(
  var1 = 1:15,
  var2 = 16:30
))

(df3 <- data.frame(
  var3 = 1:15,
  var4 = 16:30
))


(df4 <- data.frame(
  var1 = 16:30,
  var2 = 31:45
))

(df5 <- cbind(df2, df3)) #join two data frames row wise. Must have equal number of rows
(df6 <- rbind(df2, df4)) #appends a data frame to another, col names must be similar

(df2 <- data.frame(
  var1 = 1:15,
  var2 = 16:30
))

(df2$var3 <- paste(df2$var1, df2$var2)) #concatenates var1 and var2 with space in between
(df2$var4 <- paste0(df2$var1, "-", df2$var2)) #concatenates var1 and var2 with a hyphen and no space between
```

## Arrays
Are multidimensional. Can be more than 2 dimensions. Can be considered super set of matrices. Are homogeneous. Can be created by combining matrices. You cannot view an array in one go but can access the levels of the arrays (each of the matrices combined). Useful when stacking matrices on top of each other.
Arrays cannot be used to perform calculations but to store multiple matrices.

### Creating an array
```{r}
v1 =c(1:12)
(m1 = matrix(v1, nrow=3, ncol=4, byrow=TRUE))

v2 = c(25:36)
(m2 = matrix(v2, nrow=3, ncol=4, byrow=TRUE))

(A = array(c(m1,m2), dim=c(3,4,2)))# 3=rows, 4=columns, 2=number of matrices/levels in the array
```

### Retreiving levels of an array
```{r}
A[,,1] #level 1
A[,,2] #level 2
```

### Defining array rows and columns
```{r}
names <- c("jimmy","july", "feb") #row names
info <- c("Height", "Weight", "Hair colour", "skin colour") #column names
(A = array(c(m1,m2), dim=c(3,4,2), dimnames= list(names, info)))
```

### Retreiving values of an array from different levels
```{r}
A[1,,1] #returns first row of first level
A[1,,2] #returns first row of second level
```

# Package installation
## Setting work directory
## Installing and loading a package

```{r}
library(tidyverse) #contains dplyr,ggplot2, lubridate, tidyr, tibble, stringr, readr, for data cleaning, manipulation, transformation, visualization

library(haven) #for importing various types of data formats

library(magrittr) #for piping i.e %>% 

#install.packages("gmodels") #for descriptive data analysis
#library(gmodels)

#install.packages("table1") #for descriptive data analysis
#library(table1)

#library(readxl) #for importing xls dataset

```

# Reading and writing datasets
## Reading and writing CSV files (.csv)
## Reading and writing excel files (.xls/.xlsx)
## Reading and writing txt files (.txt/.doc)
## Reading and writing SAS files 
## Reading and writing STATA files .dta

# Data Wrangling

# Exploratory Data Analysis
## Univariate data analysis
## Multivariate Data analysis

# Data Visualisation
## Boxplots
## Piecharts
## Histograms
## Barcharts
## Heat maps
## Bubble graphs

# Functions and Loops
## Creating a function
## Function Iteration

# R Shiny
## Building and interactive dashboard
## Developing an RShiny Web App

